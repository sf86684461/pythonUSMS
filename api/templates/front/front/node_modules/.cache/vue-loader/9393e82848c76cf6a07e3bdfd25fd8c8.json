{"remainingRequest":"/Users/shaofeng/Desktop/pythonUSMS/api/templates/front/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/shaofeng/Desktop/pythonUSMS/api/templates/front/front/src/pages/shop-cart/list.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/shaofeng/Desktop/pythonUSMS/api/templates/front/front/src/pages/shop-cart/list.vue","mtime":1757151570010},{"path":"/Users/shaofeng/Desktop/pythonUSMS/api/templates/front/front/node_modules/babel-loader/lib/index.js","mtime":1757151725372},{"path":"/Users/shaofeng/Desktop/pythonUSMS/api/templates/front/front/node_modules/cache-loader/dist/cjs.js","mtime":1757151725167},{"path":"/Users/shaofeng/Desktop/pythonUSMS/api/templates/front/front/node_modules/vue-loader/lib/index.js","mtime":1757151725403}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBjb25maWcgZnJvbSAnQC9jb25maWcvY29uZmlnJwpleHBvcnQgZGVmYXVsdCB7CglkYXRhKCkgewoJCXJldHVybiB7CgkJCWJhc2VVcmw6IGNvbmZpZy5iYXNlVXJsLAoJCQl0YWJsZURhdGE6IFtdLAoJCQlzZWxSb3dzOltdCgkJfQoJfSwKCWNyZWF0ZWQoKSB7CgkJdGhpcy5nZXRDYXJ0TGlzdCgpOwoJfSwKCW1ldGhvZHM6IHsKCQloYW5kbGVTZWxlY3Rpb25DaGFuZ2UoZSl7CgkJCXRoaXMuc2VsUm93cyA9IGUKCQl9LAoJCWdldENhcnRMaXN0KCkgewoJCQl0aGlzLiRodHRwLmdldCgnY2FydC9saXN0Jywge3BhcmFtczoge3BhZ2U6IDEsIGxpbWl0OiAxMDAwLCB1c2VyaWQ6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdmcm9udFVzZXJpZCcpfX0pLnRoZW4ocmVzID0+IHsKCQkJCWlmIChyZXMuZGF0YS5jb2RlID09IDApIHsKCQkJCQl0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLmRhdGEubGlzdDsKCQkJCX0KCQkJfSk7CgkJfSwKCQloYW5kbGVDaGFuZ2UodmFsdWUsIGluZGV4LCByb3cpIHsKCQkJdGhpcy4kaHR0cC5nZXQoYCR7cm93LnRhYmxlbmFtZX0vZGV0YWlsLyR7cm93Lmdvb2RpZH1gKS50aGVuKHJlcyA9PiB7CgkJCQlpZiAocmVzLmRhdGEuY29kZSA9PSAwKSB7CgkJCQkJaWYgKHJlcy5kYXRhLmRhdGEub25lbGltaXR0aW1lcyYmcmVzLmRhdGEuZGF0YS5vbmVsaW1pdHRpbWVzID4gMCkgewoJCQkJCQlpZiAodmFsdWUgPiByZXMuZGF0YS5kYXRhLm9uZWxpbWl0dGltZXMpIHsKCQkJCQkJCXRoaXMudGFibGVEYXRhW2luZGV4XS5idXludW1iZXIgPSAtLXZhbHVlOwoJCQkJCQkJdGhpcy4kbWVzc2FnZS5lcnJvcihg5q+P5Lq65Y2V5qyh5Y+q6IO96LSt5LmwJHtyZXMuZGF0YS5kYXRhLm9uZWxpbWl0dGltZXN95Lu2YCk7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQlyb3cuYnV5bnVtYmVyID0gdmFsdWU7CgkJCQkJCQl0aGlzLiRodHRwLnBvc3QoJ2NhcnQvdXBkYXRlJywgcm93KS50aGVuKHJlcyA9PiB7fSk7CgkJCQkJCX0KCQkJCQl9IGVsc2UgewoJCQkJCQlyb3cuYnV5bnVtYmVyID0gdmFsdWU7CgkJCQkJCXRoaXMuJGh0dHAucG9zdCgnY2FydC91cGRhdGUnLCByb3cpLnRoZW4ocmVzID0+IHt9KTsKCQkJCQl9CgkJCQl9CgkJCX0pOwoJCX0sCgkJaGFuZGxlRGVsZXRlKGluZGV4LCByb3cpIHsKCQkJdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k5Yig6ZmkPycsICfmj5DnpLonLCB7CgkJCQljb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCgkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKCQkJCXR5cGU6ICd3YXJuaW5nJwoJCQl9KS50aGVuKCgpID0+IHsKCQkJCWxldCBkZWxJZHMgPSBuZXcgQXJyYXkoKTsKCQkJCWRlbElkcy5wdXNoKHJvdy5pZCk7CgkJCQl0aGlzLiRodHRwLnBvc3QoJ2NhcnQvZGVsZXRlJywgZGVsSWRzKS50aGVuKHJlcyA9PiB7CgkJCQkJaWYgKHJlcy5kYXRhLmNvZGUgPT0gMCkgewoJCQkJCQl0aGlzLiRtZXNzYWdlKHsKCQkJCQkJCXR5cGU6ICdzdWNjZXNzJywKCQkJCQkJCW1lc3NhZ2U6ICfliKDpmaTmiJDlip8hJywKCQkJCQkJCWR1cmF0aW9uOiAxNTAwLAoJCQkJCQkJb25DbG9zZTogKCkgPT4gewoJCQkJCQkJCXRoaXMuZ2V0Q2FydExpc3QoKTsKCQkJCQkJCX0KCQkJCQkJfSk7CgkJCQkJfQoJCQkJfSk7CgkJCX0pOwoJCX0sCgkJZGVsQWxsQ2xpY2soKXsKCQkJdGhpcy4kY29uZmlybSgn5piv5ZCm56Gu6K6k6YCJ5Lit5ZWG5ZOB5Yig6ZmkPycsICfmj5DnpLonLCB7CgkJCQljb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsCgkJCQljYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywKCQkJCXR5cGU6ICd3YXJuaW5nJwoJCQl9KS50aGVuKCgpID0+IHsKCQkJCWxldCBkZWxJZHMgPSBuZXcgQXJyYXkoKTsKCQkJCWZvcihsZXQgeCBpbiB0aGlzLnNlbFJvd3MpewoJCQkJCWRlbElkcy5wdXNoKHRoaXMuc2VsUm93c1t4XS5pZCkKCQkJCX0KCQkJCXRoaXMuJGh0dHAucG9zdCgnY2FydC9kZWxldGUnLCBkZWxJZHMpLnRoZW4ocmVzID0+IHsKCQkJCQlpZiAocmVzLmRhdGEuY29kZSA9PSAwKSB7CgkJCQkJCXRoaXMuJG1lc3NhZ2UoewoJCQkJCQkJdHlwZTogJ3N1Y2Nlc3MnLAoJCQkJCQkJbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnLAoJCQkJCQkJZHVyYXRpb246IDE1MDAsCgkJCQkJCQlvbkNsb3NlOiAoKSA9PiB7CgkJCQkJCQkJdGhpcy5nZXRDYXJ0TGlzdCgpOwoJCQkJCQkJfQoJCQkJCQl9KTsKCQkJCQl9CgkJCQl9KTsKCQkJfSk7CgkJfSwKCQlidXlDbGljaygpIHsKCQkJaWYodGhpcy5zZWxSb3dzLmxlbmd0aD09MCkgewoJCQkJdGhpcy4kbWVzc2FnZSh7CgkJCQkJdHlwZTogJ3dhcm5pbmcnLAoJCQkJCW1lc3NhZ2U6ICfor7fpgInmi6nllYblk4EnLAoJCQkJCWR1cmF0aW9uOiAxNTAwLAoJCQkJfSk7CgkJCQlyZXR1cm4KCQkJfQoJCQl2YXIgZ24gPSAiIjsKCQkJZm9yKGxldCB4IGluIHRoaXMuc2VsUm93cyl7CgkJCQl2YXIgZyA9IHRoaXMuc2VsUm93c1t4XTsKCQkJCWNvbnNvbGUubG9nKGcuZ29vZG5hbWUpCgkJCQlsZXQgdGhhdCA9IHRoaXM7CgkJCQl0aGlzLiRodHRwLmdldChgJHtnLnRhYmxlbmFtZX0vZGV0YWlsLyR7Zy5nb29kaWR9YCkudGhlbihyZXMgPT4gewoJCQkJCWlmIChyZXMuZGF0YS5jb2RlID09IDAgJiYgZy5idXludW1iZXIgPiByZXMuZGF0YS5kYXRhLmFsbGxpbWl0dGltZXMpIHsKCQkJCQkJZ24gPSBnLmdvb2RuYW1lOwoJCQkJCX0KCQkJCX0pOwoJCQl9CgkJCgkJCXNldFRpbWVvdXQoKCkgPT4gewoJCQkJaWYoZ249PSIiKSB7CgkJCQkJbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ29yZGVyR29vZHMnLCBKU09OLnN0cmluZ2lmeSh0aGlzLnNlbFJvd3MpKTsKCQkJCQl0aGlzLiRyb3V0ZXIucHVzaCgnL2luZGV4L3Nob3Atb3JkZXIvb3JkZXJDb25maXJtJyk7CgkJCQl9IGVsc2UgewoJCQkJCXRoaXMuJG1lc3NhZ2UuZXJyb3IoZ24rYCDlupPlrZjkuI3otrNgKTsKCQkJCQlyZXR1cm47CgkJCQl9CgkJCX0sIDIwMCkKCQl9Cgl9LAoJY29tcHV0ZWQ6IHsKCQl0b3RhbFByaWNlKCkgewoJCQlsZXQgdG90YWxQcmljZSA9IDA7CgkJCWZvcihsZXQgeCBpbiB0aGlzLnNlbFJvd3MpewoJCQkJICB0b3RhbFByaWNlICs9IE51bWJlcih0aGlzLnNlbFJvd3NbeF0ucHJpY2UpICogTnVtYmVyKHRoaXMuc2VsUm93c1t4XS5idXludW1iZXIpCgkJCX0KCQkJcmV0dXJuIHRvdGFsUHJpY2UudG9GaXhlZCgyKTsKCQl9Cgl9Cn0K"},{"version":3,"sources":["list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"list.vue","sourceRoot":"src/pages/shop-cart","sourcesContent":["<template>\r\n\t<div :style='{\"width\":\"100%\",\"padding\":\"30px calc((100% - 1200px)/2) 40px\",\"margin\":\"0px auto\",\"position\":\"relative\",\"background\":\"#fff\"}'>\r\n\t\t<div class=\"section-title\" :style='{\"padding\":\"10px 0\",\"margin\":\"20px auto 20px\",\"borderColor\":\"#e5e5e5\",\"color\":\"#222\",\"textAlign\":\"center\",\"background\":\"#F5F5F5\",\"borderWidth\":\"1px\",\"width\":\"100%\",\"fontSize\":\"16px\",\"borderStyle\":\"solid\",\"fontWeight\":\"600\",\"height\":\"auto\"}'>购物车</div>\r\n\t\t<el-button size=\"small\" type=\"danger\" @click=\"delAllClick\" :disabled=\"selRows.length?false:true\">删除</el-button>\r\n\t\t<el-table @selection-change=\"handleSelectionChange\" :data=\"tableData\" style=\"width: 100%\">\r\n\t\t\t<el-table-column type=\"selection\" width=\"50\" align=\"center\" />\r\n\t\t\t<el-table-column label=\"商品名称\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<div class=\"shangpin\">\r\n\t\t\t\t\t\t<el-image style=\"width: 100px; height: 100px;flex: 1\"\r\n\t\t\t\t\t\t\t:src=\"baseUrl + scope.row.picture\" fit=\"fill\"></el-image>\r\n\t\t\t\t\t\t<span style=\"margin-left: 10px;flex: 1\">{{ scope.row.goodname }}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"价格\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<span :style='{\"fontSize\":\"12px\"}'>￥</span>{{ scope.row.price }}\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"数量\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-input-number :min=\"1\" v-model=\"scope.row.buynumber\" @change=\"(value) => handleChange(value, scope.$index, scope.row)\" size=\"small\"></el-input-number>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"总价\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<span :style='{\"fontSize\":\"12px\"}'>￥</span>{{ (scope.row.price * scope.row.buynumber).toFixed(2) }}\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t\t<el-table-column label=\"操作\" width=\"150\">\r\n\t\t\t\t<template slot-scope=\"scope\">\r\n\t\t\t\t\t<el-button size=\"mini\" type=\"danger\"\r\n\t\t\t\t\t\t@click=\"handleDelete(scope.$index, scope.row)\">删除</el-button>\r\n\t\t\t\t</template>\r\n\t\t\t</el-table-column>\r\n\t\t</el-table>\r\n\t\t<div class=\"buy\" v-if=\"tableData.length > 0\">\r\n\t\t\t<span style=\"color: red;margin-right: 10px;font-weight: 700;\">总价：<span :style='{\"fontSize\":\"12px\"}'>￥</span>{{totalPrice}}</span>\r\n\t\t\t<el-button type=\"warning\" @click=\"buyClick\">点击购买</el-button>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport config from '@/config/config'\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tbaseUrl: config.baseUrl,\r\n\t\t\t\ttableData: [],\r\n\t\t\t\tselRows:[]\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getCartList();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleSelectionChange(e){\r\n\t\t\t\tthis.selRows = e\r\n\t\t\t},\r\n\t\t\tgetCartList() {\r\n\t\t\t\tthis.$http.get('cart/list', {params: {page: 1, limit: 1000, userid: localStorage.getItem('frontUserid')}}).then(res => {\r\n\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\tthis.tableData = res.data.data.list;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleChange(value, index, row) {\r\n\t\t\t\tthis.$http.get(`${row.tablename}/detail/${row.goodid}`).then(res => {\r\n\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\tif (res.data.data.onelimittimes&&res.data.data.onelimittimes > 0) {\r\n\t\t\t\t\t\t\tif (value > res.data.data.onelimittimes) {\r\n\t\t\t\t\t\t\t\tthis.tableData[index].buynumber = --value;\r\n\t\t\t\t\t\t\t\tthis.$message.error(`每人单次只能购买${res.data.data.onelimittimes}件`);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\trow.buynumber = value;\r\n\t\t\t\t\t\t\t\tthis.$http.post('cart/update', row).then(res => {});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\trow.buynumber = value;\r\n\t\t\t\t\t\t\tthis.$http.post('cart/update', row).then(res => {});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandleDelete(index, row) {\r\n\t\t\t\tthis.$confirm('是否确认删除?', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tlet delIds = new Array();\r\n\t\t\t\t\tdelIds.push(row.id);\r\n\t\t\t\t\tthis.$http.post('cart/delete', delIds).then(res => {\r\n\t\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\tmessage: '删除成功!',\r\n\t\t\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\t\t\tonClose: () => {\r\n\t\t\t\t\t\t\t\t\tthis.getCartList();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdelAllClick(){\r\n\t\t\t\tthis.$confirm('是否确认选中商品删除?', '提示', {\r\n\t\t\t\t\tconfirmButtonText: '确定',\r\n\t\t\t\t\tcancelButtonText: '取消',\r\n\t\t\t\t\ttype: 'warning'\r\n\t\t\t\t}).then(() => {\r\n\t\t\t\t\tlet delIds = new Array();\r\n\t\t\t\t\tfor(let x in this.selRows){\r\n\t\t\t\t\t\tdelIds.push(this.selRows[x].id)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.$http.post('cart/delete', delIds).then(res => {\r\n\t\t\t\t\t\tif (res.data.code == 0) {\r\n\t\t\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\t\t\ttype: 'success',\r\n\t\t\t\t\t\t\t\tmessage: '删除成功!',\r\n\t\t\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t\t\t\tonClose: () => {\r\n\t\t\t\t\t\t\t\t\tthis.getCartList();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tbuyClick() {\r\n\t\t\t\tif(this.selRows.length==0) {\r\n\t\t\t\t\tthis.$message({\r\n\t\t\t\t\t\ttype: 'warning',\r\n\t\t\t\t\t\tmessage: '请选择商品',\r\n\t\t\t\t\t\tduration: 1500,\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tvar gn = \"\";\r\n\t\t\t\tfor(let x in this.selRows){\r\n\t\t\t\t\tvar g = this.selRows[x];\r\n\t\t\t\t\tconsole.log(g.goodname)\r\n\t\t\t\t\tlet that = this;\r\n\t\t\t\t\tthis.$http.get(`${g.tablename}/detail/${g.goodid}`).then(res => {\r\n\t\t\t\t\t\tif (res.data.code == 0 && g.buynumber > res.data.data.alllimittimes) {\r\n\t\t\t\t\t\t\tgn = g.goodname;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tif(gn==\"\") {\r\n\t\t\t\t\t\tlocalStorage.setItem('orderGoods', JSON.stringify(this.selRows));\r\n\t\t\t\t\t\tthis.$router.push('/index/shop-order/orderConfirm');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.$message.error(gn+` 库存不足`);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 200)\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\ttotalPrice() {\r\n\t\t\t\tlet totalPrice = 0;\r\n\t\t\t\tfor(let x in this.selRows){\r\n\t\t\t\t\t  totalPrice += Number(this.selRows[x].price) * Number(this.selRows[x].buynumber)\r\n\t\t\t\t}\r\n\t\t\t\treturn totalPrice.toFixed(2);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\r\n\t.section {\r\n\t\twidth: 900px;\r\n\t\tmargin: 0 auto;\r\n\t}\r\n\t\r\n\t.shangpin {\r\n\t\tdisplay: flex;\r\n\t}\r\n\t.buy {\r\n\t\ttext-align: right;\r\n\t\tpadding-right: 82px;\r\n\t}\r\n</style>\r\n"]}]}